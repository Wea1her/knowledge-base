---
title: 控制上下文
description: “如何精准控制对话流并清理冗余上下文”
order: 9
---

处理复杂任务时，你经常需要引导对话保持聚焦。下面这些技巧可以帮助你控制对话流，避免 Claude 走偏。

:::note[课程来源]
原文链接：[控制上下文 (Anthropic 官方课程)](https://anthropic.skilljar.com/claude-code-in-action/303237)
:::

## 用 Esc 中断 Claude

当 Claude 开始偏离方向或一次性处理过多任务时，你可以按 **Esc** 中断它的响应，随后重新明确目标。

例如：你让 Claude 为多个函数写测试，它可能开始规划整套测试体系。此时按 Esc，中断后让它先写一个函数的测试。

## Esc + 记忆的组合

Esc 的一个强大用途是修复重复性错误：

1. 按 **Esc** 停止当前回复。
2. 用 `#` 添加一条记忆（例如正确的做法或规范）。
3. 继续对话，让 Claude 按新记忆执行。

这样可以有效地避免 Claude 在未来对话中重复同样的错误。

## 回退对话

长对话容易积累大量无关上下文。例如排错过程可能对下一任务无用。此时可以按 **Esc** 两次“回退对话”：

- 保留有价值的上下文（例如对代码库的理解）。
- 删除无用或干扰性的对话内容。
- 让 Claude 专注于当前任务。

## 上下文管理命令

Claude 提供了几个专门管理上下文的命令：

### /compact
`/compact` 会总结整个对话并保留关键要点。适用于：
- Claude 已学习到项目的重要信息。
- 你要继续相关任务但希望对话更短。
- 对话变长但仍有价值信息需要保留。

### /clear
`/clear` 会清空对话上下文，适用于：
- 切换到完全不相关的新任务。
- 旧上下文可能干扰新任务。
- 需要彻底重来。

## 何时使用这些技巧

这些控制技巧特别适用于：
- 长对话导致上下文杂乱。
- 任务切换时担心上下文干扰。
- Claude 重复犯错。
- 复杂项目需要保持聚焦。

灵活使用 Esc、中断回退、`/compact` 与 `/clear`，可以让 Claude 在开发流程中保持高效与专注。这些不是小技巧，而是高质量 AI 开发会话的基础能力。